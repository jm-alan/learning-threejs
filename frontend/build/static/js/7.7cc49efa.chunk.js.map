{"version":3,"sources":["store/engine/renderer/actions.js","utils/hooks.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","components/Engine/KeyListener.js","store/engine/keys/actions.js"],"names":["ReadyRenderer","type","types","UnreadyRenderer","PauseRender","ResumeRender","events","useEventListener","element","reduce","acc","next","event","listener","addEventListener","removeEventListener","renderContext","ready","render","scene","camera","this","__renderer","functions","keys","__dispatch","captureDispatch","dispatch","build","canvas","WebGLRenderer","resize","setPixelRatio","window","devicePixelRatio","setSize","innerWidth","innerHeight","addFunction","key","action","__updateKeys","removeFunction","name","destroy","dispose","splice","length","Object","useRenderer","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","KeyListener","useDispatch","useSelector","state","engine","pressed","paused","renderer","document","add","remove","useEffect","onKeyDown","preventDefault","stopPropagation","code","onKeyUp","keydown","keyup","onEscape"],"mappings":"6HAAA,oJAEaA,EAAgB,iBAAO,CAClCC,KAAMC,MAGKC,EAAkB,iBAAO,CACpCF,KAAMC,MAGKE,EAAc,iBAAO,CAChCH,KAAMC,MAGKG,EAAe,iBAAO,CACjCJ,KAAMC,O,gICXFI,EAAS,CACb,QACA,QACA,WACA,SACA,cACA,eACA,UACA,eACA,UACA,kBACA,eACA,qBACA,iBACA,OACA,MACA,mBACA,UACA,YACA,YACA,WACA,YACA,OACA,OACA,mBACA,kBACA,oBACA,UACA,WACA,QACA,qBACA,QACA,gBACA,cACA,eACA,eACA,oBACA,mBACA,cACA,aACA,cACA,YACA,mBACA,SACA,kBACA,cACA,cACA,WACA,YACA,aACA,mBACA,gBACA,gBACA,kBACA,mBACA,QACA,qBACA,WACA,sBACA,OACA,QACA,iBACA,mBACA,oBACA,cACA,OACA,MACA,WACA,cACA,iBACA,QACA,UACA,WACA,QACA,mBACA,kBACA,gBACA,aACA,eACA,UACA,WACA,QACA,YACA,aACA,aACA,YACA,WACA,YACA,UACA,aACA,gBACA,kBACA,eACA,gBACA,iBACA,eACA,iBACA,6BACA,WACA,QACA,SACA,SACA,OACA,cACA,WACA,YACA,aACA,YACA,0BACA,uBACA,qBACA,4BACA,QACA,QACA,UACA,OACA,QACA,QACA,UACA,YACA,OACA,WACA,4BACA,mBACA,uBACA,SACA,SACA,QACA,kBACA,eACA,qBACA,iBACA,cACA,SACA,oBACA,QACA,qBACA,gBACA,cACA,eACA,eACA,cACA,aACA,cACA,YACA,mBACA,gBACA,gBACA,kBACA,WACA,QACA,SACA,UACA,SACA,QACA,iBACA,UACA,iBACA,UACA,QACA,QACA,aACA,iBACA,YACA,QACA,UACA,OACA,WACA,aACA,SACA,UACA,UACA,UACA,aACA,eACA,UACA,aACA,YACA,wBACA,wBACA,QACA,QACA,QACA,gBACA,UACA,gBACA,QACA,UACA,QACA,WACA,QACA,eACA,QACA,WACA,cACA,QACA,OACA,SACA,eACA,UACA,WACA,qBACA,sBACA,wBACA,uBACA,oBACA,2BACA,SACA,oBACA,QACA,UACA,QACA,UACA,OACA,QACA,aACA,uBACA,8BACA,cACA,YACA,wBACA,cACA,oBACA,eACA,2BACA,0BACA,oBACA,eACA,uBACA,QACA,eACA,UACA,WACA,gBACA,UACA,UACA,oBACA,yBACA,OACA,UACA,WACA,aACA,MACA,QACA,UACA,SACA,WACA,aACA,YACA,cACA,QACA,gBACA,WACA,MACA,QACA,OACA,QACA,SACA,QACA,aACA,WACA,cACA,QACA,QACA,OACA,SACA,SACA,SACA,OACA,MACA,QACA,YACA,WACA,SACA,cACA,WACA,SACA,cACA,SACA,SACA,QACA,QACA,UACA,OACA,aACA,kBACA,eACA,qBACA,iBACA,eACA,cACA,eACA,OACA,OACA,MACA,eACA,oBACA,mBACA,QACA,QACA,mBACA,sBACA,aACA,iBACA,OACA,eACA,UACA,UACA,SACA,oBACA,WACA,WACA,QACA,WACA,mBACA,SACA,UACA,mBACA,gBACA,gBACA,kBACA,qBACA,SACA,oBACA,gBACA,mBACA,sBACA,sBACA,iBACA,6BACA,+BACA,yBACA,eACA,UACA,iBACA,QACA,QACA,UACA,YACA,OACA,WACA,UACA,QACA,MACA,qBACA,YACA,cACA,SACA,aACA,eACA,UACA,mBACA,gBAGK,SAASC,EAAkBC,GAKhC,MAAO,CAFkBF,EAAOG,QAAO,SAACC,EAAKC,GAAN,OAAgBD,EAAIC,IAFxCC,EAE2DD,EAFlD,SAAAE,GAAQ,OAAIL,EAAQM,iBAAiBF,EAAOC,OAEgBH,EAFrE,IAAAE,IAE0E,IACjEN,EAAOG,QAAO,SAACC,EAAKC,GAAN,OAAgBD,EAAIC,IAFzCC,EAE8DD,EAFrD,SAAAE,GAAQ,OAAIL,EAAQO,oBAAoBH,EAAOC,OAEgBH,EAFxE,IAAAE,IAE6E,KAIpG,IAAMI,EAAgB,CACpBC,OAAO,EACPC,OAFoB,SAEZC,EAAOC,GACbC,KAAKC,WAAWJ,OAAOC,EAAOC,IAEhCG,UAAW,GACXC,KAAM,GACNC,WAAY,KACZH,WAAY,KACZI,gBAToB,SASHC,GACfN,KAAKI,WAAaE,GAEpBC,MAZoB,SAYbC,GACLR,KAAKC,WAAa,IAAIQ,gBAAc,CAAED,WACtCR,KAAKI,WAAWzB,gBAElB+B,OAhBoB,WAiBlBV,KAAKC,WAAWU,cAAcC,OAAOC,kBACrCb,KAAKC,WAAWa,QAAQF,OAAOG,WAAYH,OAAOI,cAEpDC,YApBoB,SAoBPC,EAAKC,GAChBnB,KAAKE,UAAUgB,GAAOC,EACtBnB,KAAKoB,gBAEPC,eAxBoB,SAwBJC,UACPtB,KAAKE,UAAUoB,GACtBtB,KAAKoB,gBAEPG,QA5BoB,WA6BlBvB,KAAKC,YAAcD,KAAKC,WAAWuB,UACnCxB,KAAKI,WAAWtB,eAChBkB,KAAKC,WAAa,MAEpBmB,aAjCoB,WAiCH,IAAD,GACd,EAAApB,KAAKG,MAAKsB,OAAV,SAAiB,EAAGzB,KAAKG,KAAKuB,QAA9B,mBAAyCC,OAAOxB,KAAKH,KAAKE,gBAIjD0B,EAAc,kBAAMjC,I,gCCrZlB,SAASkC,EAAgBC,EAAGC,GAMzC,OALAF,EAAkBF,OAAOK,gBAAkB,SAAyBF,EAAGC,GAErE,OADAD,EAAEG,UAAYF,EACPD,IAGcA,EAAGC,GAN5B,mC,gCCAe,SAASG,IACtB,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAClD,EACP,MAAOI,GACP,OAAO,GATX,mC,iICOe,SAASC,IACtB,IAAMtC,EAAWuC,cAEX1C,EAAO2C,aAAY,SAAAC,GAAK,OAAIA,EAAMC,OAAO7C,KAAK8C,WAC9CC,EAASJ,aAAY,SAAAC,GAAK,OAAIA,EAAMC,OAAOG,SAASD,UAE1D,EAAsBhE,YAAiBkE,UAAvC,mBAAOC,EAAP,KAAYC,EAAZ,KAmCA,OAjCAC,qBAAU,WACR,IAAMC,EAAY,SAAAb,GCdE,IAAAzB,EDelByB,EAAEc,iBACFd,EAAEe,mBACDvD,EAAKwC,EAAEgB,OAASrD,GCjBCY,EDiBiByB,EAAEgB,KCjBX,CAC9B/E,KAAMC,IACNqC,UDiBQ0C,EAAU,SAAAjB,GCdM,IAAAzB,EDepByB,EAAEc,iBACFd,EAAEe,kBACFpD,GCjBoBY,EDiBAyB,EAAEgB,KCjBM,CAChC/E,KAAMC,IACNqC,UDwBE,OAPKgC,EAGMA,IACTI,EAAOO,QAAQL,GACfF,EAAOQ,MAAMF,KAJbP,EAAIQ,QAAQL,GACZH,EAAIS,MAAMF,IAKL,WACLN,EAAOO,QAAQL,GACfF,EAAOQ,MAAMF,MAEd,CAACtD,EAAU4C,EAAQG,EAAKC,EAAQnD,IAEnCoD,qBAAU,WACR,IAAMQ,EAAW,SAAC,GAAc,IAAZJ,EAAW,EAAXA,KACL,WAATA,GAAsBT,EACR,WAATS,GAAqBT,GAAQ5C,EAAStB,eADbsB,EAASvB,gBAI7C,OADAsE,EAAIQ,QAAQE,GACL,kBAAMT,EAAOO,QAAQE,MAC3B,CAACzD,EAAU+C,EAAKC,EAAQJ,IAEpB","file":"static/js/7.7cc49efa.chunk.js","sourcesContent":["import * as types from './types';\n\nexport const ReadyRenderer = () => ({\n  type: types.READY\n});\n\nexport const UnreadyRenderer = () => ({\n  type: types.UNREADY\n});\n\nexport const PauseRender = () => ({\n  type: types.PAUSE\n});\n\nexport const ResumeRender = () => ({\n  type: types.UNPAUSE\n});\n","import { WebGLRenderer } from 'three';\n\nimport { ReadyRenderer, UnreadyRenderer } from '../store/engine/renderer/actions';\n\nconst events = [\n  'abort',\n  'ended',\n  'addtrack',\n  'change',\n  'removetrack',\n  'messageerror',\n  'message',\n  'messageerror',\n  'message',\n  'animationcancel',\n  'animationend',\n  'animationiteration',\n  'animationstart',\n  'copy',\n  'cut',\n  'DOMContentLoaded',\n  'dragend',\n  'dragenter',\n  'dragleave',\n  'dragover',\n  'dragstart',\n  'drag',\n  'drop',\n  'fullscreenchange',\n  'fullscreenerror',\n  'gotpointercapture',\n  'keydown',\n  'keypress',\n  'keyup',\n  'lostpointercapture',\n  'paste',\n  'pointercancel',\n  'pointerdown',\n  'pointerenter',\n  'pointerleave',\n  'pointerlockchange',\n  'pointerlockerror',\n  'pointermove',\n  'pointerout',\n  'pointerover',\n  'pointerup',\n  'readystatechange',\n  'scroll',\n  'selectionchange',\n  'selectstart',\n  'touchcancel',\n  'touchend',\n  'touchmove',\n  'touchstart',\n  'transitioncancel',\n  'transitionend',\n  'transitionrun',\n  'transitionstart',\n  'visibilitychange',\n  'wheel',\n  'afterscriptexecute',\n  'auxclick',\n  'beforescriptexecute',\n  'blur',\n  'click',\n  'compositionend',\n  'compositionstart',\n  'compositionupdate',\n  'contextmenu',\n  'copy',\n  'cut',\n  'dblclick',\n  'DOMActivate',\n  'DOMMouseScroll',\n  'error',\n  'focusin',\n  'focusout',\n  'focus',\n  'fullscreenchange',\n  'fullscreenerror',\n  'gesturechange',\n  'gestureend',\n  'gesturestart',\n  'keydown',\n  'keypress',\n  'keyup',\n  'mousedown',\n  'mouseenter',\n  'mouseleave',\n  'mousemove',\n  'mouseout',\n  'mouseover',\n  'mouseup',\n  'mousewheel',\n  'msContentZoom',\n  'MSGestureChange',\n  'MSGestureEnd',\n  'MSGestureHold',\n  'MSGestureStart',\n  'MSGestureTap',\n  'MSInertiaStart',\n  'MSManipulationStateChanged',\n  'overflow',\n  'paste',\n  'scroll',\n  'select',\n  'show',\n  'touchcancel',\n  'touchend',\n  'touchmove',\n  'touchstart',\n  'underflow',\n  'webkitmouseforcechanged',\n  'webkitmouseforcedown',\n  'webkitmouseforceup',\n  'webkitmouseforcewillbegin',\n  'wheel',\n  'error',\n  'message',\n  'open',\n  'abort',\n  'error',\n  'loadend',\n  'loadstart',\n  'load',\n  'progress',\n  'webglcontextcreationerror',\n  'webglcontextlost',\n  'webglcontextrestored',\n  'toggle',\n  'cancel',\n  'close',\n  'animationcancel',\n  'animationend',\n  'animationiteration',\n  'animationstart',\n  'beforeinput',\n  'change',\n  'gotpointercapture',\n  'input',\n  'lostpointercapture',\n  'pointercancel',\n  'pointerdown',\n  'pointerenter',\n  'pointerleave',\n  'pointermove',\n  'pointerout',\n  'pointerover',\n  'pointerup',\n  'transitioncancel',\n  'transitionend',\n  'transitionrun',\n  'transitionstart',\n  'formdata',\n  'reset',\n  'submit',\n  'invalid',\n  'search',\n  'abort',\n  'canplaythrough',\n  'canplay',\n  'durationchange',\n  'emptied',\n  'ended',\n  'error',\n  'loadeddata',\n  'loadedmetadata',\n  'loadstart',\n  'pause',\n  'playing',\n  'play',\n  'progress',\n  'ratechange',\n  'seeked',\n  'seeking',\n  'stalled',\n  'suspend',\n  'timeupdate',\n  'volumechange',\n  'waiting',\n  'slotchange',\n  'cuechange',\n  'enterpictureinpicture',\n  'leavepictureinpicture',\n  'abort',\n  'close',\n  'error',\n  'versionchange',\n  'blocked',\n  'upgradeneeded',\n  'error',\n  'success',\n  'abort',\n  'complete',\n  'error',\n  'devicechange',\n  'error',\n  'addtrack',\n  'removetrack',\n  'ended',\n  'mute',\n  'unmute',\n  'messageerror',\n  'message',\n  'complete',\n  'merchantvalidation',\n  'paymentmethodchange',\n  'shippingaddresschange',\n  'shippingoptionchange',\n  'payerdetailchange',\n  'resourcetimingbufferfull',\n  'resize',\n  'bufferedamountlow',\n  'close',\n  'closing',\n  'error',\n  'message',\n  'open',\n  'error',\n  'tonechange',\n  'gatheringstatechange',\n  'selectedcandidatepairchange',\n  'statechange',\n  'addstream',\n  'connectionstatechange',\n  'datachannel',\n  'icecandidateerror',\n  'icecandidate',\n  'iceconnectionstatechange',\n  'icegatheringstatechange',\n  'negotiationneeded',\n  'removestream',\n  'signalingstatechange',\n  'track',\n  'audioprocess',\n  'message',\n  'activate',\n  'contentdelete',\n  'install',\n  'message',\n  'notificationclick',\n  'pushsubscriptionchange',\n  'push',\n  'connect',\n  'audioend',\n  'audiostart',\n  'end',\n  'error',\n  'nomatch',\n  'result',\n  'soundend',\n  'soundstart',\n  'speechend',\n  'speechstart',\n  'start',\n  'voiceschanged',\n  'boundary',\n  'end',\n  'error',\n  'mark',\n  'pause',\n  'resume',\n  'start',\n  'beginEvent',\n  'endEvent',\n  'repeatEvent',\n  'abort',\n  'error',\n  'load',\n  'resize',\n  'scroll',\n  'unload',\n  'copy',\n  'cut',\n  'paste',\n  'cuechange',\n  'addtrack',\n  'change',\n  'removeTrack',\n  'addtrack',\n  'change',\n  'removetrack',\n  'resize',\n  'scroll',\n  'close',\n  'error',\n  'message',\n  'open',\n  'afterprint',\n  'animationcancel',\n  'animationend',\n  'animationiteration',\n  'animationstart',\n  'appinstalled',\n  'beforeprint',\n  'beforeunload',\n  'blur',\n  'copy',\n  'cut',\n  'devicemotion',\n  'deviceorientation',\n  'DOMContentLoaded',\n  'error',\n  'focus',\n  'gamepadconnected',\n  'gamepaddisconnected',\n  'hashchange',\n  'languagechange',\n  'load',\n  'messageerror',\n  'message',\n  'offline',\n  'online',\n  'orientationchange',\n  'pagehide',\n  'pageshow',\n  'paste',\n  'popstate',\n  'rejectionhandled',\n  'resize',\n  'storage',\n  'transitioncancel',\n  'transitionend',\n  'transitionrun',\n  'transitionstart',\n  'unhandledrejection',\n  'unload',\n  'vrdisplayactivate',\n  'vrdisplayblur',\n  'vrdisplayconnect',\n  'vrdisplaydeactivate',\n  'vrdisplaydisconnect',\n  'vrdisplayfocus',\n  'vrdisplaypointerrestricted',\n  'vrdisplaypointerunrestricted',\n  'vrdisplaypresentchange',\n  'messageerror',\n  'message',\n  'languagechange',\n  'abort',\n  'error',\n  'loadend',\n  'loadstart',\n  'load',\n  'progress',\n  'timeout',\n  'reset',\n  'end',\n  'inputsourceschange',\n  'selectend',\n  'selectstart',\n  'select',\n  'squeezeend',\n  'squeezestart',\n  'squeeze',\n  'visibilitychange',\n  'devicechange'\n];\n\nexport function useEventListener (element) {\n  const eventAdder = event => listener => element.addEventListener(event, listener);\n  const eventRemover = event => listener => element.removeEventListener(event, listener);\n  const addEventListener = events.reduce((acc, next) => (acc[next] = eventAdder(next)) && acc, {});\n  const removeEventListener = events.reduce((acc, next) => (acc[next] = eventRemover(next)) && acc, {});\n  return [addEventListener, removeEventListener];\n}\n\nconst renderContext = {\n  ready: false,\n  render (scene, camera) {\n    this.__renderer.render(scene, camera);\n  },\n  functions: {},\n  keys: [],\n  __dispatch: null,\n  __renderer: null,\n  captureDispatch (dispatch) {\n    this.__dispatch = dispatch;\n  },\n  build (canvas) {\n    this.__renderer = new WebGLRenderer({ canvas });\n    this.__dispatch(ReadyRenderer());\n  },\n  resize () {\n    this.__renderer.setPixelRatio(window.devicePixelRatio);\n    this.__renderer.setSize(window.innerWidth, window.innerHeight);\n  },\n  addFunction (key, action) {\n    this.functions[key] = action;\n    this.__updateKeys();\n  },\n  removeFunction (name) {\n    delete this.functions[name];\n    this.__updateKeys();\n  },\n  destroy () {\n    this.__renderer && this.__renderer.dispose();\n    this.__dispatch(UnreadyRenderer());\n    this.__renderer = null;\n  },\n  __updateKeys () {\n    this.keys.splice(0, this.keys.length, ...Object.keys(this.functions));\n  }\n};\n\nexport const useRenderer = () => renderContext;\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { PressKey, ReleaseKey } from '../../store/engine/keys/actions';\nimport { PauseRender, ResumeRender } from '../../store/engine/renderer/actions';\nimport { useEventListener } from '../../utils/hooks';\n\nexport default function KeyListener () {\n  const dispatch = useDispatch();\n\n  const keys = useSelector(state => state.engine.keys.pressed);\n  const paused = useSelector(state => state.engine.renderer.paused);\n\n  const [add, remove] = useEventListener(document);\n\n  useEffect(() => {\n    const onKeyDown = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      !keys[e.code] && dispatch(PressKey(e.code));\n    };\n    const onKeyUp = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      dispatch(ReleaseKey(e.code));\n    };\n    if (!paused) {\n      add.keydown(onKeyDown);\n      add.keyup(onKeyUp);\n    } else if (paused) {\n      remove.keydown(onKeyDown);\n      remove.keyup(onKeyUp);\n    }\n    return () => {\n      remove.keydown(onKeyDown);\n      remove.keyup(onKeyUp);\n    };\n  }, [dispatch, paused, add, remove, keys]);\n\n  useEffect(() => {\n    const onEscape = ({ code }) => {\n      if (code === 'Escape' && !paused) dispatch(PauseRender());\n      else if (code === 'Escape' && paused) dispatch(ResumeRender());\n    };\n    add.keydown(onEscape);\n    return () => remove.keydown(onEscape);\n  }, [dispatch, add, remove, paused]);\n\n  return null;\n}\n","import * as types from './types';\n\nexport const PressKey = key => ({\n  type: types.PRESS,\n  key\n});\n\nexport const ReleaseKey = key => ({\n  type: types.RELEASE,\n  key\n});\n"],"sourceRoot":""}